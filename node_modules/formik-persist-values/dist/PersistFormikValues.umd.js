!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("formik")):"function"==typeof define&&define.amd?define(["exports","react","formik"],e):e((t=t||self).PersistFormikValues={},t.react,t.formik)}(this,(function(t,e,r){"use strict";var n="default"in e?e.default:e,o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var u=function(){return(u=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function i(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,u=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=u.next()).done;)i.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}return i}function c(t){return this instanceof c?(this.v=t,this):new c(t)}var f=Object.freeze({__proto__:null,__extends:function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},get __assign(){return u},__rest:function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},__decorate:function(t,e,r,n){var o,u=arguments.length,i=u<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(u<3?o(i):u>3?o(e,r,i):o(e,r))||i);return u>3&&i&&Object.defineProperty(e,r,i),i},__param:function(t,e){return function(r,n){e(r,n,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,e,r,n){return new(r||(r=Promise))((function(o,u){function i(t){try{c(n.next(t))}catch(t){u(t)}}function a(t){try{c(n.throw(t))}catch(t){u(t)}}function c(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(i,a)}c((n=n.apply(t,e||[])).next())}))},__generator:function(t,e){var r,n,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(t){u=[6,t],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},__exportStar:function(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])},__values:i,__read:a,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var u=arguments[e],i=0,a=u.length;i<a;i++,o++)n[o]=u[i];return n},__await:c,__asyncGenerator:function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),u=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise((function(r,n){u.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=o[t](e)).value instanceof c?Promise.resolve(r.value.v).then(f,l):s(u[0][2],r)}catch(t){s(u[0][3],t)}var r}function f(t){a("next",t)}function l(t){a("throw",t)}function s(t,e){t(e),u.shift(),u.length&&a(u[0][0],u[0][1])}},__asyncDelegator:function(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:c(t[n](e)),done:"return"===n}:o?o(e):e}:o}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=i(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}}}),l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function p(t,e){return t(e={exports:{}},e.exports),e.exports}var h=p((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){void 0===e&&(e=0);var r=n.useRef(!1),o=n.useRef(),u=n.useRef(t),i=n.useCallback((function(){return r.current}),[]),a=n.useCallback((function(){r.current=!1,o.current&&clearTimeout(o.current),o.current=setTimeout((function(){r.current=!0,u.current()}),e)}),[e]),c=n.useCallback((function(){r.current=null,o.current&&clearTimeout(o.current)}),[]);return n.useEffect((function(){u.current=t}),[t]),n.useEffect((function(){return a(),c}),[e]),[i,c,a]}}));s(h);var _=s(p((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=f.__importDefault(h);e.default=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=[]);var u=r.default(t,e),i=u[0],a=u[1],c=u[2];return n.useEffect(c,o),[i,a]}}))),y=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,d="object"==typeof l&&l&&l.Object===Object&&l,b="object"==typeof self&&self&&self.Object===Object&&self,g=d||b||Function("return this")();function m(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function w(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,u=r+(n?1:-1);for(;n?u--:++u<o;)if(e(t[u],u,t))return u;return-1}(t,P,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function O(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function j(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function S(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function P(t){return t!=t}function x(t,e){return t.has(e)}function k(t,e){return function(r){return t(e(r))}}var I,E=Array.prototype,A=Function.prototype,R=Object.prototype,M=g["__core-js_shared__"],T=(I=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",C=A.toString,V=R.hasOwnProperty,F=R.toString,$=RegExp("^"+C.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=g.Symbol,N=k(Object.getPrototypeOf,Object),D=R.propertyIsEnumerable,G=E.splice,q=J?J.isConcatSpreadable:void 0,z=Object.getOwnPropertySymbols,B=Math.max,H=nt(g,"Map"),K=nt(Object,"create");function L(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Q(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function U(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function W(t){var e=-1,r=t?t.length:0;for(this.__data__=new U;++e<r;)this.add(t[e])}function X(t,e){var r=pt(t)||ft(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var u in t)!e&&!V.call(t,u)||o&&("length"==u||at(u,n))||r.push(u);return r}function Y(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function Z(t){return!(!yt(t)||(e=t,T&&T in e))&&(_t(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?$:y).test(function(t){if(null!=t){try{return C.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function tt(t){if(!yt(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e,r,n,o=(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||R,e===n),u=[];for(var i in t)("constructor"!=i||!o&&V.call(t,i))&&u.push(i);return u}function et(t){return function(t,e,r){var n=e(t);return pt(t)?n:S(n,r(t))}(t,dt,ut)}function rt(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function nt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Z(r)?r:void 0}L.prototype.clear=function(){this.__data__=K?K(null):{}},L.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},L.prototype.get=function(t){var e=this.__data__;if(K){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return V.call(e,t)?e[t]:void 0},L.prototype.has=function(t){var e=this.__data__;return K?void 0!==e[t]:V.call(e,t)},L.prototype.set=function(t,e){return this.__data__[t]=K&&void 0===e?"__lodash_hash_undefined__":e,this},Q.prototype.clear=function(){this.__data__=[]},Q.prototype.delete=function(t){var e=this.__data__,r=Y(e,t);return!(r<0)&&(r==e.length-1?e.pop():G.call(e,r,1),!0)},Q.prototype.get=function(t){var e=this.__data__,r=Y(e,t);return r<0?void 0:e[r][1]},Q.prototype.has=function(t){return Y(this.__data__,t)>-1},Q.prototype.set=function(t,e){var r=this.__data__,n=Y(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},U.prototype.clear=function(){this.__data__={hash:new L,map:new(H||Q),string:new L}},U.prototype.delete=function(t){return rt(this,t).delete(t)},U.prototype.get=function(t){return rt(this,t).get(t)},U.prototype.has=function(t){return rt(this,t).has(t)},U.prototype.set=function(t,e){return rt(this,t).set(t,e),this},W.prototype.add=W.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},W.prototype.has=function(t){return this.__data__.has(t)};var ot=z?k(z,Object):bt,ut=z?function(t){for(var e=[];t;)S(e,ot(t)),t=N(t);return e}:bt;function it(t){return pt(t)||ft(t)||!!(q&&t&&t[q])}function at(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||v.test(t))&&t>-1&&t%1==0&&t<e}function ct(t){if("string"==typeof t||function(t){return"symbol"==typeof t||vt(t)&&"[object Symbol]"==F.call(t)}(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ft(t){return function(t){return vt(t)&&ht(t)}(t)&&V.call(t,"callee")&&(!D.call(t,"callee")||"[object Arguments]"==F.call(t))}var lt,st,pt=Array.isArray;function ht(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!_t(t)}function _t(t){var e=yt(t)?F.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function yt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function vt(t){return!!t&&"object"==typeof t}function dt(t){return ht(t)?X(t,!0):tt(t)}function bt(){return[]}var gt=(lt=function(t,e){return null==t?{}:(e=j(function t(e,r,n,o,u){var i=-1,a=e.length;for(n||(n=it),u||(u=[]);++i<a;){var c=e[i];r>0&&n(c)?r>1?t(c,r-1,n,o,u):S(u,c):o||(u[u.length]=c)}return u}(e,1),ct),function(t,e){return function(t,e,r){for(var n=-1,o=e.length,u={};++n<o;){var i=e[n],a=t[i];r(a,i)&&(u[i]=a)}return u}(t=Object(t),e,(function(e,r){return r in t}))}(t,function(t,e,r,n){var o,u=-1,i=w,a=!0,c=t.length,f=[],l=e.length;if(!c)return f;r&&(e=j(e,(o=r,function(t){return o(t)}))),n?(i=O,a=!1):e.length>=200&&(i=x,a=!1,e=new W(e));t:for(;++u<c;){var s=t[u],p=r?r(s):s;if(s=n||0!==s?s:0,a&&p==p){for(var h=l;h--;)if(e[h]===p)continue t;f.push(s)}else i(e,p,n)||f.push(s)}return f}(et(t),e)))},st=B(void 0===st?lt.length-1:st,0),function(){for(var t=arguments,e=-1,r=B(t.length-st,0),n=Array(r);++e<r;)n[e]=t[st+e];e=-1;for(var o=Array(st+1);++e<st;)o[e]=t[e];return o[st]=n,m(lt,this,o)}),mt=function(){return function(){var t=e.useState(!1),r=t[0],n=t[1];return e.useEffect((function(){return n(!0)}),[]),r}()&&!!window},wt=function(t,r){var n=t.initialValues,o=r.name,u=r.hashInitials,i=r.hashSpecificity,a=o+"_",c=e.useMemo((function(){return u?""+a+function(t,e){void 0===e&&(e=7);var r=0;try{for(var n=JSON.stringify(t).replace(/\{|\"|\}|\:|,/g,""),o=n.length,u=0;u<o;u++)r+=n.charCodeAt(u)*e}catch(t){r=0}return r}(n,i):o}),[o,u,JSON.stringify(n),i]),f=function(t){var e=t.storage,r=void 0===e?"localStorage":e,n=mt();switch(r){case"sessionStorage":return n?window.sessionStorage:void 0;case"localStorage":return n?window.localStorage:void 0;default:return r}}(r);return[e.useMemo((function(){return f?f.getItem(c):null}),[c,f]),e.useCallback((function(t){f&&(f.setItem(c,JSON.stringify(t)),Object.keys(f).forEach((function(t){t.indexOf(a)>-1&&t!==c&&f.removeItem(t)})))}),[f])]},Ot=function(t,r){var n=r.debounce,o=void 0===n?300:n,i=r.persistInvalid,a=r.ignoreValues,c=t.values,f=t.setValues,l=t.isValid,s=t.initialValues,p=wt(t,r),h=p[0],y=p[1],v=JSON.stringify(c),d=e.useCallback((function(){if(l||i){var t=a?gt(c,a):c;y(t)}}),[v,l,i]);e.useEffect((function(){if(h)try{var t=JSON.parse(h),e=u(u({},s),t);v!==JSON.stringify(e)&&f(e)}catch(t){console.error("Parse persisted values is not possible",t)}}),[h]),_(d,o,[v,l,i])},jt=e.memo((function(t){var e=r.useFormikContext();return Ot(e,t),null}));t.PersistFormikValues=jt,t.usePersistFormikValues=Ot,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=PersistFormikValues.umd.js.map
